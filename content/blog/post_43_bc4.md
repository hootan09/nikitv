---
title: ุณุงุฎุช ุจูุงฺฉฺู ุจุง ูฺฏุงู ุจู ุณุงุฎุชุงุฑ ุจู ฺฉูู - ูุณูุช ฺูุงุฑู (ุชุฑุงฺฉูุด ูุง-ฑ)
image: images/blockchain/y4ilhv4wagyi.webp
description: ููุฏูู ุชุฑุงฺฉูุด ูุง ููุจ ุจุช ฺฉูู ูุณุชูุฏ ู ุชููุง ูุฏู ุจูุงฺฉฺู ุฐุฎุฑู ุชุฑุงฺฉูุด ูุง ุจู ุฑูุด ุงูู ู ูุงุจู ุงุนุชูุงุฏ ุงุณุชุ ุจูุงุจุฑุงู ูฺ ฺฉุณ ูู ุชูุงูุฏ ุขููุง ุฑุง ูพุณ ุงโฆ
date: 2022-06-15
author: mam_niki
tags:
- ุฑูุฒุงุฑุฒ
- ฺฉุฑูพุชู
- ุจุฑูุงูู ููุณ
- ุจูุงฺฉโฺู
- ุงุฑุฒ ุฏุฌุชุงู
categories:
- ุจุฑูุงูู ููุณ
---

#### ููุฏูู

ุชุฑุงฺฉูุด ูุง ููุจ ุจุช ฺฉูู ูุณุชูุฏ ู ุชููุง ูุฏู ุจูุงฺฉฺู ุฐุฎุฑู ุชุฑุงฺฉูุด ูุง ุจู ุฑูุด ุงูู ู ูุงุจู ุงุนุชูุงุฏ ุงุณุชุ ุจูุงุจุฑุงู ูฺ ฺฉุณ ูู ุชูุงูุฏ ุขููุง ุฑุง ูพุณ ุงุฒ ุงุฌุงุฏ ุชุบุฑ ุฏูุฏ. ุงูุฑูุฒ ูุง ุงุฌุฑุง ุชุฑุงฺฉูุด ูุง ุฑุง ุขุบุงุฒ ู ฺฉูู. ุงูุง ุงุฒ ุขูุฌุง ฺฉู ุงู ฺฉ ููุถูุน ฺฉุงููุงู ุจุฒุฑฺฏ ุงุณุชุ ุขู ุฑุง ุจู ุฏู ุจุฎุด ุชูุณู ูโฺฉูู: ุฏุฑ ุงู ุจุฎุดุ ูฺฉุงูุณู ฺฉู ุชุฑุงฺฉูุดโูุง ุฑุง ูพุงุฏูโุณุงุฒ ูโฺฉูู ู ุฏุฑ ูุณูุช ุฏููุ ุฌุฒุฆุงุช ุฑุง ุจุฑุฑุณ ูโฺฉูู.

ููฺููุ ุงุฒ ุขูุฌุง ฺฉู ุชุบุฑุงุช ฺฉุฏ ุจุณุงุฑ ุฒุงุฏ ุงุณุชุ ุชูุตู ููู ุขููุง ุฏุฑ ุงูุฌุง ุจ ูุนู ุงุณุช. ุดูุง ู ุชูุงูุฏ ุชูุงู ุชุบุฑุงุช ุฑุง _**[ุงูุฌุง](https://github.com/Jeiwan/blockchain_go/compare/part_3...part_4#files_bucket)**_ ุจุจูุฏ.

### ูุงุดู ูุฌูุฏ ูุฏุงุฑุฏ

ุงฺฏุฑ ุชุง ุจู ุญุงู ฺฉ ุจุฑูุงูู ูุจ ุงุฌุงุฏ ฺฉุฑุฏู ุงุฏุ ุจู ููุธูุฑ ุงุฌุฑุง ูพุฑุฏุงุฎุช ูุงุ ุงุญุชูุงูุงู ุงู ุฌุฏุงูู ุฑุง ุฏุฑ ฺฉ DB ุงุฌุงุฏ ู ฺฉูุฏ: ุญุณุงุจ ูุง (`accounts`) ู ุชุฑุงฺฉูุด ูุง (`transactions`). ฺฉ ุญุณุงุจ ุงุทูุงุนุงุช ูุฑุจูุท ุจู ฺฉ ฺฉุงุฑุจุฑุ ุงุฒ ุฌููู ุงุทูุงุนุงุช ุดุฎุต ู ููุฌูุฏ ุงู ุฑุง ุฐุฎุฑู ู ฺฉูุฏุ ู ฺฉ ุชุฑุงฺฉูุด ุงุทูุงุนุงุช ูุฑุจูุท ุจู ุงูุชูุงู ูพูู ุงุฒ ฺฉ ุญุณุงุจ ุจู ุญุณุงุจ ุฏฺฏุฑ ุฑุง ุฐุฎุฑู ู ฺฉูุฏ. ุฏุฑ ุจุช ฺฉููุ ูพุฑุฏุงุฎุช ูุง ุจู ุฑูุด ฺฉุงููุง ูุชูุงูุช ุงูุฌุงู ู ุดูุฏ. ุขููุง ููุงุฑุฏ ุฒุฑ ูุณุชูุฏ :

ฑ- ุจุฏูู ุญุณุงุจ.

ฒ- ุจุฏูู ุจุงูุงูุณ ุง ููุฌูุฏ

ณ- ุจุฏูู ุขุฏุฑุณ

ด- ุจุฏูู ุณฺฉู

ต- ุจุฏูู ูุฑุณุชูุฏู ู ฺฏุฑูุฏู

ุงุฒ ุขูุฌุง ฺฉู ุจูุงฺฉฺู ฺฉ ูพุงฺฏุงู ุฏุงุฏู ุนููู ู ุจุงุฒ ุงุณุชุ ูุง ููโุฎูุงูู ุงุทูุงุนุงุช ุญุณุงุณ ุฏุฑ ููุฑุฏ ุตุงุญุจุงู ฺฉู ูพูู ุฑุง ุฐุฎุฑู ฺฉูู. ุณฺฉู ูุง ุฏุฑ ุญุณุงุจ ูุง ุฌูุน ุขูุฑ ูู ุดููุฏ. ุชุฑุงฺฉูุด ูุง ูพูู ุฑุง ุงุฒ ฺฉ ุขุฏุฑุณ ุจู ุขุฏุฑุณ ุฏฺฏุฑ ููุชูู ูู ฺฉููุฏ. ูฺ ููุฏ ุง ูุดุฎุตู ุง ูุฌูุฏ ูุฏุงุฑุฏ ฺฉู ููุฌูุฏ ุญุณุงุจ ุฑุง ูฺฏู ุฏุงุฑุฏ. ููุท ูุนุงููุงุช ูุฌูุฏ ุฏุงุฑุฏ. ุงูุง ุฏุฑูู ฺฉ ุชุฑุงฺฉูุด ฺุณุชุ

#### ุชุฑุงฺฉูุด ุจุช ฺฉูู

ุชุฑุงฺฉูุด ุชุฑฺฉุจ ุงุฒ ูุฑูุฏ ู ุฎุฑูุฌ ุงุณุช:

```go
type Transaction struct {
	ID   []byte
	Vin  []TXInput
	Vout []TXOutput
}
```

ูุฑูุฏโูุง ฺฉ ุชุฑุงฺฉูุด ุฌุฏุฏุ ุฎุฑูุฌโูุง ฺฉ ุชุฑุงฺฉูุด ูุจู ุงุณุช (ุงูุจุชู ฺฉ ุงุณุชุซูุง ูุฌูุฏ ุฏุงุฑุฏ ฺฉู ุจุนุฏุงู ุฏุฑุจุงุฑู ุขู ุตุญุจุช ุฎูุงูู ฺฉุฑุฏ). ุฎุฑูุฌ ูุง ุฌุง ูุณุชูุฏ ฺฉู ุณฺฉู ูุง ุฏุฑ ูุงูุน ุฐุฎุฑู ู ุดููุฏ. ูููุฏุงุฑ ุฒุฑ ุงุฑุชุจุงุท ูุชูุงุจู ุชุฑุงฺฉูุด ูุง ุฑุง ูุดุงู ู ุฏูุฏ:

{{< image src="/images/blockchain/vjocfdj115fw.png" caption="" command="fill" option="q95" class="img-fluid mx-auto d-block" title="" >}}

ุชูุฌู ฺฉูุฏ ฺฉู:

ฑ- ุฎุฑูุฌ ูุง ูุณุชูุฏ ฺฉู ุจู ูุฑูุฏ ูุง ูุฑุชุจุท ูุณุชูุฏ.

ฒ- ุฏุฑ ฺฉ ุชุฑุงฺฉูุดุ ูุฑูุฏ ูุง ู ุชูุงููุฏ ุจู ุฎุฑูุฌ ูุง ฺูุฏ ุชุฑุงฺฉูุด ุงุดุงุฑู ฺฉููุฏ.

ณ- ฺฉ ูุฑูุฏ ุจุงุฏ ุจู ฺฉ ุฎุฑูุฌ ุงุดุงุฑู ฺฉูุฏ.

ุฏุฑ ุทูู ุงู ููุงููุ ูุง ุงุฒ ฺฉููุงุช ูุงููุฏ "ูพูู" (money)ุ "ุณฺฉู"(coins)ุ "ุฎุฑุฌ ฺฉุฑุฏู"(spend)ุ "ุงุฑุณุงู"(send)ุ "ุญุณุงุจ"(account) ู ุบุฑู ุงุณุชูุงุฏู ุฎูุงูู ฺฉุฑุฏ. ุงูุง ฺูู ููุงูู ุฏุฑ ุจุช ฺฉูู ูุฌูุฏ ูุฏุงุฑุฏ. ุชุฑุงฺฉูุดโูุง ููุท ููุงุฏุฑ ุฑุง ุจุง ฺฉ ุงุณฺฉุฑูพุช ููู ูโฺฉููุฏุ ฺฉู ููุท ุชูุณุท ฺฉุณ ฺฉู ุขููุง ุฑุง ููู ฺฉุฑุฏู ุงุณุช ูโุชูุงูุฏ ุจุงุฒ ุดูุฏ.

#### ุฎุฑูุฌ ูุง ุชุฑุงฺฉูุด ุง Transaction Outputs

ุงุจุชุฏุง ุจุง ุฎุฑูุฌ ูุง ุดุฑูุน ู ฺฉูู:

```go
type TXOutput struct {
	Value        int
	ScriptPubKey string
}
```

ุฏุฑ ูุงูุนุ ุงู ุฎุฑูุฌโูุง ูุณุชูุฏ ฺฉู ยซุณฺฉูโูุงยป ุฑุง ุฐุฎุฑู ูโฺฉููุฏ (ุจู ูุณูุช Value ุฏุฑ ุจุงูุง ุชูุฌู ฺฉูุฏ) ู ุฐุฎุฑู ุจู ูุนูุง ููู ฺฉุฑุฏู ุขููุง ุจุง ฺฉ ูพุงุฒู ุงุณุช ฺฉู ุฏุฑ _**ScriptPubKey**_ ุฐุฎุฑู ู ุดูุฏ. ุฏุฑ ุฏุงุฎูุ ุจุช ฺฉูู ุงุฒ ฺฉ ุฒุจุงู ุจุฑูุงูู ููุณ ุจู ูุงู _Script_ ุงุณุชูุงุฏู ู ฺฉูุฏ ฺฉู ุจุฑุง ุชุนุฑู ููุทู ููู ู ุจุงุฒ ฺฉุฑุฏู ุฎุฑูุฌ ูุง ุงุณุชูุงุฏู ู ุดูุฏ. ุงู ุฒุจุงู ฺฉุงููุงู ุงุจุชุฏุง ุงุณุช (ุงู ุจู ุทูุฑ ุนูุฏ ุณุงุฎุชู ุดุฏู ุงุณุช ุชุง ุงุฒ ูฺฉ ูุง ู ุณูุก ุงุณุชูุงุฏู ูุง ุงุญุชูุงู ุฌููฺฏุฑ ุดูุฏ)ุ ุงูุง ูุง ุฏุฑ ููุฑุฏ ุขู ุจุง ุฌุฒุฆุงุช ุตุญุจุช ูู ฺฉูู. ุฏุฑ _**[ุงูุฌุง](https://en.bitcoin.it/wiki/Script)**_ ู ุชูุงูุฏ ุชูุถุญ ุฏูู ุฏุฑ ููุฑุฏ ุขู ูพุฏุง ฺฉูุฏ.

> ุฏุฑ ุจุช ฺฉููุ ููุฏ Value ุชุนุฏุงุฏ ุณุงุชูุด ูุง ุฑุง ุฐุฎุฑู ู ฺฉูุฏุ ูู ุชุนุฏุงุฏ ุจุช ฺฉูู. ุณุงุชูุด ุตุฏ ููููู ุจุช ฺฉูู (0.00000001 BTC) ุงุณุชุ ุจูุงุจุฑุงู ุงู ฺฉูฺฺฉุชุฑู ูุงุญุฏ ุงุฑุฒ ุฏุฑ ุจุช ฺฉูู (ูุงููุฏ ฺฉ ุณูุช) ุงุณุช.

ุงุฒ ุขูุฌุง ฺฉู ูุง ุขุฏุฑุณโูุง ุฑุง ูพุงุฏูโุณุงุฒ ูฺฉุฑุฏู ุงูุ ูุนูุงู ุงุฒ ฺฉู ููุทู ูุฑุจูุท ุจู ุงุณฺฉุฑูพุชโููุณ ุงุฌุชูุงุจ ูโฺฉูู. _**ScriptPubKey**_ ฺฉ ุฑุดุชู ุฏูุฎูุงู (ุขุฏุฑุณ ฺฉู ูพูู ุชุนุฑู ุดุฏู ุชูุณุท ฺฉุงุฑุจุฑ) ุฑุง ุฐุฎุฑู ู ฺฉูุฏ.

> ุจู ูุฑ ุญุงูุ ุฏุงุดุชู ฺูู ุฒุจุงู ุจุฑูุงูู ููุณ ุจู ุงู ูุนู ุงุณุช ฺฉู ุจุช ฺฉูู ู ุชูุงูุฏ ุจู ุนููุงู ฺฉ ูพูุชูุฑู ูุฑุงุฑุฏุงุฏ ููุดููุฏ (smart-contract) ูุฒ ููุฑุฏ ุงุณุชูุงุฏู ูุฑุงุฑ ฺฏุฑุฏ.

ฺฉ ฺุฒ ููู ุฏุฑ ููุฑุฏ ุฎุฑูุฌ ูุง ุงู ุงุณุช ฺฉู ุขููุง ุชูุณู ูุงูพุฐุฑ (**indivisible**) ูุณุชูุฏุ ุจู ุงู ูุนู ฺฉู ุดูุง ูู ุชูุงูุฏ ุจุฎุด ุงุฒ ููุฏุงุฑ ุขู ุฑุง ุงุฑุฌุงุน ุฏูุฏ. ููฺฏุงู ฺฉู ฺฉ ุฎุฑูุฌ ุฏุฑ ฺฉ ุชุฑุงฺฉูุด ุฌุฏุฏ ุงุฑุฌุงุน ุฏุงุฏู ู ุดูุฏุ ุจู ุนููุงู ฺฉ ฺฉู ูุตุฑู ู ุดูุฏ. ู ุงฺฏุฑ ููุฏุงุฑ ุขู ุจุดุชุฑ ุงุฒ ููุฏุงุฑ ููุฑุฏ ูุงุฒ ุจุงุดุฏุ ุชุบุฑ ุงุฌุงุฏ ุดุฏู ู ุจู ูุฑุณุชูุฏู ุจุงุฒฺฏุฑุฏุงูุฏู ู ุดูุฏ. ุงู ุดุจู ุดุฑุงุท ุฏูุง ูุงูุน ุงุณุช ฺฉู ุดูุง ูุซูุงู ฺฉ ุงุณฺฉูุงุณ 5 ุฏูุงุฑ ุฑุง ุจุฑุง ฺุฒ ฺฉู 1 ุฏูุงุฑ ููุช ุฏุงุฑุฏ ูพุฑุฏุงุฎุช ู ฺฉูุฏ ู 4 ุฏูุงุฑ ุจุฑฺฏุฑุฏุงูุฏู ู ุดูุฏ.

#### ูุฑูุฏ ูุง ุชุฑุงฺฉูุด ุง Transaction Inputs

ู ุงู ูุฑูุฏ ุงุณุช:

```go
type TXInput struct {
	Txid      []byte
	Vout      int
	ScriptSig string
}
```

ููุงูุทูุฑ ฺฉู ูุจูุง ุฐฺฉุฑ ุดุฏุ ฺฉ ูุฑูุฏ ุจู ุฎุฑูุฌ ูุจู ุงุดุงุฑู ู ฺฉูุฏ: _**Txid**_ ุดูุงุณู ฺูู ุชุฑุงฺฉูุด ุฑุง ุฐุฎุฑู ู ฺฉูุฏ ู _**Vout**_ ุงูุฏุณ ฺฉ ุฎุฑูุฌ ุฑุง ุฏุฑ ุชุฑุงฺฉูุด ุฐุฎุฑู ู ฺฉูุฏ. _**ScriptSig**_ ฺฉ ุงุณฺฉุฑูพุช ุงุณุช ฺฉู ุฏุงุฏู ูุง ุฑุง ุจุฑุง ุงุณุชูุงุฏู ุฏุฑ _**ScriptPubKey**_ ฺฉ ุฎุฑูุฌ ูุฑุงูู ู ฺฉูุฏ.

ุงฺฏุฑ ุฏุงุฏู ูุง ุฏุฑุณุช ุจุงุดูุฏุ ุฎุฑูุฌ ุฑุง ู ุชูุงู ุจุงุฒ ฺฉุฑุฏ ู ุงุฒ ููุฏุงุฑ ุขู ุจุฑุง ุชููุฏ ุฎุฑูุฌ ูุง ุฌุฏุฏ ุงุณุชูุงุฏู ฺฉุฑุฏ. ุงฺฏุฑ ุฏุฑุณุช ูุจุงุดุฏุ ุฎุฑูุฌ ุฑุง ูู ุชูุงู ุฏุฑ ูุฑูุฏ ุงุฑุฌุงุน ุฏุงุฏ. ุงู ูฺฉุงูุฒู ุงุณุช ฺฉู ุชุถูู ู ฺฉูุฏ ฺฉุงุฑุจุฑุงู ูู ุชูุงููุฏ ุณฺฉู ูุง ูุชุนูู ุจู ุงูุฑุงุฏ ุฏฺฏุฑ ุฑุง ุฎุฑุฌ ฺฉููุฏ.

ุจุงุฒ ููุ ุงุฒ ุขูุฌุง ฺฉู ูุง ูููุฒ ุขุฏุฑุณ ุฑุง ูพุงุฏู ุณุงุฒ ูฺฉุฑุฏู ุงูุ _**ScriptSig**_ ููุท ฺฉ ุขุฏุฑุณ ฺฉู ูพูู ุฏูุฎูุงู ุชุนุฑู ุดุฏู ุชูุณุท ฺฉุงุฑุจุฑ ุฑุง ุฐุฎุฑู ู ฺฉูุฏ. ุฏุฑ ููุงูู ุจุนุฏ ุจุฑุฑุณ ฺฉูุฏูุง ุนููู ู ุงูุถุงูุง ุฑุง ุงุฌุฑุง ุฎูุงูู ฺฉุฑุฏ.

ุจุงุฏ ุขู ุฑุง ุฎูุงุตู ฺฉูู. ุฎุฑูุฌ ูุง ุฌุง ูุณุชูุฏ ฺฉู "ุณฺฉู ูุง" ุฐุฎุฑู ู ุดููุฏ. ูุฑ ุฎุฑูุฌ ุฏุงุฑุง ฺฉ ุงุณฺฉุฑูพุช ุจุงุฒ ฺฉุฑุฏู ููู ุงุณุช ฺฉู ููุทู ุจุงุฒ ฺฉุฑุฏู ููู ุฎุฑูุฌ ุฑุง ุชุนู ู ฺฉูุฏ. ูุฑ ุชุฑุงฺฉูุด ุฌุฏุฏ ุจุงุฏ ุญุฏุงูู ฺฉ ูุฑูุฏ ู ุฎุฑูุฌ ุฏุงุดุชู ุจุงุดุฏ. ฺฉ ูุฑูุฏ ุจู ุฎุฑูุฌ ฺฉ ุชุฑุงฺฉูุด ูุจู ุงุดุงุฑู ู ฺฉูุฏ ู ุฏุงุฏู ูุง (ููุฏ _**ScriptSig**_) ุฑุง ุงุฑุงุฆู ู ุฏูุฏ ฺฉู ุฏุฑ ุงุณฺฉุฑูพุช ุจุงุฒ ฺฉุฑุฏู ููู ุฎุฑูุฌ ุจุฑุง ุจุงุฒ ฺฉุฑุฏู ููู ุขู ู ุงุณุชูุงุฏู ุงุฒ ููุฏุงุฑ ุขู ุจุฑุง ุงุฌุงุฏ ุฎุฑูุฌ ูุง ุฌุฏุฏ ุงุณุชูุงุฏู ู ุดูุฏ.

ุงูุง ฺู ฺุฒ ุงูู ุดุฏ: ูุฑูุฏ ุง ุฎุฑูุฌุ

#### ุงูู ุชุฎู ูุฑุบ ุจูุฏู. (ุงุดุงุฑู ุจู ุงูู ูุฑุบ ุจูุฏู ุง ุชุฎู ูุฑุบ)

ุฏุฑ ุจุช ฺฉููุ ุงู ุชุฎู ูุฑุบ ุงุณุช ฺฉู ูุจู ุงุฒ ูุฑุบ ุขูุฏู ุงุณุช. ููุทู ูุฑูุฏ-ุงุฑุฌุงุน-ุฎุฑูุฌ ูุง ูุถุนุช ฺฉูุงุณฺฉ "ูุฑุบ ุง ุชุฎู ูุฑุบ" ุงุณุช. ูุฑูุฏ ูุง ุฎุฑูุฌ ูุง ุฑุง ุชููุฏ ู ฺฉููุฏ ู ุฎุฑูุฌ ูุง ูุฑูุฏ ูุง ุฑุง ููฺฉู ู ฺฉููุฏ. ู ุฏุฑ ุจุช ฺฉููุ ุฎุฑูุฌ ูุง ูุจู ุงุฒ ูุฑูุฏ ูุง ูุฑุงุฑ ู ฺฏุฑูุฏ.

ููฺฏุงู ฺฉู ฺฉ ูุงูุฑ ุดุฑูุน ุจู ุงุณุชุฎุฑุงุฌ ฺฉ ุจููฺฉ ู ฺฉูุฏุ ฺฉ _**ุชุฑุงฺฉูุด ฺฉูู ุจุณ ุง**_ **coinbase transaction** ุจู ุขู ุงุถุงูู ู ฺฉูุฏ. ุชุฑุงฺฉูุด ฺฉูู ุจุณ ููุน ุฎุงุต ุงุฒ ุชุฑุงฺฉูุด ุงุณุช ฺฉู ุจู ุฎุฑูุฌ ูุง ูุจู ูุงุฒ ูุฏุงุฑุฏ. ุฎุฑูุฌโูุง (ุนู ยซุณฺฉูโูุงยป) ุฑุง ุงุฒ ูฺโุฌุง ุงุฌุงุฏ ูโฺฉูุฏ. ุชุฎู ูุฑุบ ุจุฏูู ูุฑุบ ุงู ูพุงุฏุงุด ุงุณุช ฺฉู ูุงูุฑูุง ุจุฑุง ุงุณุชุฎุฑุงุฌ ุจููฺฉ ูุง ุฌุฏุฏ ุฏุฑุงูุช ู ฺฉููุฏ.

ููุงูุทูุฑ ฺฉู ู ุฏุงูุฏุ ุจููฺฉ ูพุฏุงุด (genesis block) ุฏุฑ ุงุจุชุฏุง ุฒูุฌุฑู ุจููฺฉ ูุฌูุฏ ุฏุงุฑุฏ. ุงู ุจููฺฉ ุงุณุช ฺฉู ุงููู ุฎุฑูุฌ ุฑุง ุฏุฑ ุจูุงฺฉ ฺู ุชููุฏ ู ฺฉูุฏ. ู ูฺ ุฎุฑูุฌ ูุจู ูุงุฒู ูุณุช ุฒุฑุง ูฺ ุชุฑุงฺฉูุด ูุจู ู ฺูู ุฎุฑูุฌ ูุฌูุฏ ูุฏุงุฑุฏ.

ุจุงุฏ ฺฉ ุชุฑุงฺฉูุด ฺฉูู ุจุณ ุงุฌุงุฏ ฺฉูู:

```go
func NewCoinbaseTX(to, data string) *Transaction {
	if data == "" {
		data = fmt.Sprintf("Reward to '%s'", to)
	}

	txin := TXInput{[]byte{}, -1, data}
	txout := TXOutput{subsidy, to}
	tx := Transaction{nil, []TXInput{txin}, []TXOutput{txout}}
	tx.SetID()

	return &tx
}
```

ฺฉ ุชุฑุงฺฉูุด ฺฉูู ุจุณ ุชููุง ฺฉ ูุฑูุฏ ุฏุงุฑุฏ. ุฏุฑ ุงุฌุฑุง ูุง _**Txid**_ ุขู ุฎุงู ุงุณุช ู _**Vout**_ ุจุฑุงุจุฑ ุจุง **1-** ุงุณุช. ููฺููุ ฺฉ ุชุฑุงฺฉูุด coinbase ฺฉ ุงุณฺฉุฑูพุช ุฑุง ุฏุฑ _**ScriptSig**_ ุฐุฎุฑู ูู ฺฉูุฏ. ุฏุฑ ุนูุถุ ุฏุงุฏู ูุง ุฏูุฎูุงู ุฏุฑ ุขูุฌุง ุฐุฎุฑู ู ุดูุฏ.

> ุฏุฑ ุจุช ฺฉููุ ุงููู ุชุฑุงฺฉูุด ฺฉูู ุจุณ ุญุงู ูพุงู ุฒุฑ ุงุณุช: "The Times 03/Jan/2009 Chancellor on brink of second bailout for banksโ". _**[ุฎูุฏุช ูุชูู ุจุจูุด](https://blockchain.info/tx/4a5e1e4baab89f3a32518a88c31bc87f618f76673e2cc77ab2127b7afdeda33b?show_adv=true)**_

ุงู `subsidy` ููุฏุงุฑ ูพุงุฏุงุด ุงุณุช. ุฏุฑ ุจุช ฺฉููุ ุงู ุนุฏุฏ ุฏุฑ ูฺ ฺฉุฌุง ุฐุฎุฑู ูู ุดูุฏ ู ููุท ุจุฑ ุงุณุงุณ ุชุนุฏุงุฏ ฺฉู ุจูุงฺฉ ูุง ูุญุงุณุจู ู ุดูุฏ: ุชุนุฏุงุฏ ุจูุงฺฉ ูุง ุจุฑ 210000 ุชูุณู ู ุดูุฏ. ุงุณุชุฎุฑุงุฌ ุจููฺฉ ูพุฏุงุด 50 BTC ุชููุฏ ู ฺฉูุฏ ู ูุฑ 210000 ุจููฺฉ ููุฏุงุฑ ูพุงุฏุงุด ูุตู ู ุดูุฏ. ุฏุฑ ุงุฌุฑุง ุฎูุฏุ ูพุงุฏุงุด ุฑุง ุจู ุนููุงู ฺฉ ุซุงุจุช ุฐุฎุฑู ู ฺฉูู (ุญุฏุงูู ุฏุฑ ุญุงู ุญุงุถุฑ ๐).

#### ุฐุฎุฑู ุชุฑุงฺฉูุด ูุง ุฏุฑ ุจูุงฺฉ ฺู

ุงุฒ ุงู ูพุณุ ูุฑ ุจููฺฉ ุจุงุฏ ุญุฏุงูู ฺฉ ุชุฑุงฺฉูุด ุฑุง ุฐุฎุฑู ฺฉูุฏ ู ุฏฺฏุฑ ุงูฺฉุงู ุงุณุชุฎุฑุงุฌ ุจููฺฉ ุจุฏูู ุชุฑุงฺฉูุด ูุฌูุฏ ูุฏุงุฑุฏ. ุงู ุจุฏุงู ูุนู ุงุณุช ฺฉู ูุง ุจุงุฏ ููุฏ Data ุฑุง ุงุฒ Block ุญุฐู ฺฉูู ู ุจู ุฌุง ุขู ุชุฑุงฺฉูุด ูุง ุฑุง ุฐุฎุฑู ฺฉูู:  

```go
type Block struct {
	Timestamp     int64
	Transactions  []*Transaction
	PrevBlockHash []byte
	Hash          []byte
	Nonce         int
}
```

ุฏู ุชุงุจุน NewBlock ู NewGenesisBlock ูุฒ ุจุงุฏ ุจุฑ ุงู ุงุณุงุณ ุชุบุฑ ฺฉููุฏ:

```go
func NewBlock(transactions []*Transaction, prevBlockHash []byte) *Block {
	block := &Block{time.Now().Unix(), transactions, prevBlockHash, []byte{}, 0}
	...
}

func NewGenesisBlock(coinbase *Transaction) *Block {
	return NewBlock([]*Transaction{coinbase}, []byte{})
}
```

ฺุฒ ฺฉู ุจุงุฏ ุชุบุฑ ฺฉูุฏ ุงุฌุงุฏ ฺฉ ุจูุงฺฉฺู ุฌุฏุฏ ุงุณุช:

```go
func CreateBlockchain(address string) *Blockchain {
	...
	err = db.Update(func(tx *bolt.Tx) error {
		cbtx := NewCoinbaseTX(address, genesisCoinbaseData)
		genesis := NewGenesisBlock(cbtx)

		b, err := tx.CreateBucket([]byte(blocksBucket))
		err = b.Put(genesis.Hash, genesis.Serialize())
		...
	})
	...
}
```

ุงฺฉูููุ ุชุงุจุน ุขุฏุฑุณ ู ฺฏุฑุฏ ฺฉู ูพุงุฏุงุด ุงุณุชุฎุฑุงุฌ ุจููฺฉ ูพุฏุงุด ุฑุง ุฏุฑุงูุช ู ฺฉูุฏ.

#### ุงุตูุงุญ ุงูฺฏูุฑุชู Proof-of-Work

ุงูฺฏูุฑุชู Proof-of-Work ุจุงุฏ ุชุฑุงฺฉูุด ูุง ุฐุฎุฑู ุดุฏู ุฏุฑ ฺฉ ุจููฺฉ ุฑุง ุฏุฑ ูุธุฑ ุจฺฏุฑุฏ ุชุง ุซุจุงุช ู ูุงุจูุช ุงุทููุงู ุจูุงฺฉฺู ุฑุง ุจู ุนููุงู ุฐุฎุฑู ุชุฑุงฺฉูุด ุชุถูู ฺฉูุฏ. ุจูุงุจุฑุงู ุงฺฉููู ุจุงุฏ ุฑูุด _**ProofOfWork.prepareData**_ ุฑุง ุงุตูุงุญ ฺฉูู:

```go
func (pow *ProofOfWork) prepareData(nonce int) []byte {
	data := bytes.Join(
		[][]byte{
			pow.block.PrevBlockHash,
			pow.block.HashTransactions(), // This line was changed
			IntToHex(pow.block.Timestamp),
			IntToHex(int64(targetBits)),
			IntToHex(int64(nonce)),
		},
		[]byte{},
	)

	return data
}
```

ุจู ุฌุง _**pow.block.Data**_ุ ุงฺฉููู ุงุฒ ุชุงุจุน  _**pow.block.HashTransactions**_ ุงุณุชูุงุฏู ู ฺฉูู ฺฉู ุนุจุงุฑุช ุงุณุช ุงุฒ:

```go
func (b *Block) HashTransactions() []byte {
	var txHashes [][]byte
	var txHash [32]byte

	for _, tx := range b.Transactions {
		txHashes = append(txHashes, tx.ID)
	}
	txHash = sha256.Sum256(bytes.Join(txHashes, []byte{}))

	return txHash[:]
}
```

ุจุงุฒ ููุ ูุง ุงุฒ ูุด ุจู ุนููุงู ูฺฉุงูุฒู ุจุฑุง ุงุฑุงุฆู ููุงุด ููุญุตุฑ ุจู ูุฑุฏ ุฏุงุฏู ูุง ุงุณุชูุงุฏู ู ฺฉูู. ูุง ูโุฎูุงูู ููู ุชุฑุงฺฉูุดโูุง ฺฉ ุจููฺฉ ุจูโุทูุฑ ููุญุตุฑุจูโูุฑุฏ ุชูุณุท ฺฉ ูุด ุดูุงุณุง ุดููุฏ. ุจุฑุง ุฑุณุฏู ุจู ุงู ูุฏูุ ูุด ูุง ูุฑ ุชุฑุงฺฉูุด ุฑุง ุฏุฑุงูุช ู ฺฉููุ ุขููุง ุฑุง ุจู ูู ูุชุตู ู ฺฉูู ู ฺฉ ูุด ุงุฒ ุชุฑฺฉุจ ุงูุญุงู ุฑุง ุฏุฑุงูุช ู ฺฉูู.

> ุจุช ฺฉูู ุงุฒ ุชฺฉูฺฉ ูพฺุฏู ุชุฑ ุงุณุชูุงุฏู ู ฺฉูุฏ: ุชูุงู ุชุฑุงฺฉูุด ูุง ููุฌูุฏ ุฏุฑ ฺฉ ุจููฺฉ ุฑุง ุจู ุนููุงู ุฏุฑุฎุช ูุฑฺฉู ุง [Merkle tree](https://en.wikipedia.org/wiki/Merkle_tree) ูุดุงู ู ุฏูุฏ ู ุงุฒ ุฑุดู ูุด ุฏุฑุฎุช ุฏุฑ ุณุณุชู ุงุซุจุงุช ฺฉุงุฑ ุงุณุชูุงุฏู ู ฺฉูุฏ. ุงู ุฑูฺฉุฑุฏ ุจู ุดูุง ุงูฺฉุงู ู ุฏูุฏ ุชุง ุจู ุณุฑุนุช ุจุฑุฑุณ ฺฉูุฏ ฺฉู ุขุง ฺฉ ุจููฺฉ ุญุงู ุชุฑุงฺฉูุด ุฎุงุต ุงุณุชุ ููุท ุจุง ุฏุงุดุชู ูุด ุฑุดู ู ุจุฏูู ุฏุงูููุฏ ููู ุชุฑุงฺฉูุด ูุง.

ุจุงุฏ ุจุฑุฑุณ ฺฉูู ฺฉู ููู ฺุฒ ุชุง ุงูุฌุง ุฏุฑุณุช ุงุณุช:

```txt
$ blockchain_go createblockchain -address Ivan
00000093450837f8b52b78c25f8163bb6137caf43ff4d9a01d1b731fa8ddcc8a
Done!
```

ุฎุจ! ูุง ุงููู ุฌุงุฒู ุงุณุชุฎุฑุงุฌ ุฑุง ุฏุฑุงูุช ฺฉุฑุฏู. ุงูุง ฺฺฏููู ููุฌูุฏ ฺฉ ฺฉุงุฑุจุฑ ุง ุจุงูุงูุณ ุฑุง ุจุฑุฑุณ ฺฉููุ

#### ุฎุฑูุฌ ูุง ุชุฑุงฺฉูุด ุฎุฑุฌ ูุดุฏู ุง Unspent Transaction Outputs

ูุง ุจุงุฏ ุชูุงู ุฎุฑูุฌ ูุง ุชุฑุงฺฉูุด ูุตุฑู ูุดุฏู (UTXO) ุฑุง ูพุฏุง ฺฉูู. ูุตุฑู ูุดุฏู ุจู ุงู ูุนู ุงุณุช ฺฉู ุงู ุฎุฑูุฌ ูุง ุฏุฑ ูฺ ูุฑูุฏ ุงุฑุฌุงุน ูุดุฏู ุงูุฏ. ุฏุฑ ูููุฏุงุฑ ุจุงูุงุ ุงู ููุงุฑุฏ ุนุจุงุฑุชูุฏ ุงุฒ:

```txt
1.  tx0, output 1;
2.  tx1, output 0;
3.  tx3, output 0;
4.  tx4, output 0.
```

ุงูุจุชูุ ููุช ุจุงูุงูุณ ุง ููุฌูุฏ ุฑุง ุจุฑุฑุณ ูโฺฉููุ ุจู ููู ุขูโูุง ูุงุฒ ูุฏุงุฑูุ ุจูฺฉู ููุท ุจู ุขูโูุง ูุงุฒ ุฏุงุฑู ฺฉู ูโุชูุงู ุจุง ฺฉูุฏ ฺฉู ุฏุฑ ุงุฎุชุงุฑ ูุงุณุชุ ููู ุขู ุฑุง ุจุงุฒ ฺฉุฑุฏ (ุฏุฑ ุญุงู ุญุงุถุฑ ฺฉูุฏูุง ูพุงุฏูโุณุงุฒ ูุดุฏู ุงูุฏ ู ุจู ุฌุง ุขู ุงุฒ ุขุฏุฑุณโูุง ุชุนุฑูโุดุฏู ฺฉุงุฑุจุฑ ุงุณุชูุงุฏู ูโฺฉูู). ุงุจุชุฏุงุ ุจุงุฏ ุฑูุด ูุง ููู-ุจุงุฒ ฺฉุฑุฏู ููู (locking-unlocking) ุฑุง ุฏุฑ ูุฑูุฏ ูุง ู ุฎุฑูุฌ ูุง ุชุนุฑู ฺฉูู:

ุฏุฑ ุงูุฌุง ูุง ููุท ููุฏูุง ุงุณฺฉุฑูพุช ุฑุง ุจุง unlockingData ููุงุณู ู ฺฉูู. ูพุณ ุงุฒ ูพุงุฏู ุณุงุฒ ุขุฏุฑุณ ูุง ุจุฑ ุงุณุงุณ ฺฉูุฏูุง ุฎุตูุตุ ุงู ูุทุนุงุช ุฏุฑ ููุงูู ุขูุฏู ุจูุจูุฏ ุฎูุงููุฏ ุงูุช.

```go
func (in *TXInput) CanUnlockOutputWith(unlockingData string) bool {
	return in.ScriptSig == unlockingData
}

func (out *TXOutput) CanBeUnlockedWith(unlockingData string) bool {
	return out.ScriptPubKey == unlockingData
}
```

ูุฑุญูู ุจุนุฏ - ุงูุชู ุชุฑุงฺฉูุด ูุง ุญุงู ุฎุฑูุฌ ูุง ุฎุฑุฌ ูุดุฏู - ุงู ููุฑุฏ ุจุณุงุฑ ุฏุดูุงุฑ ุงุณุช:

```go
func (bc *Blockchain) FindUnspentTransactions(address string) []Transaction {
  var unspentTXs []Transaction
  spentTXOs := make(map[string][]int)
  bci := bc.Iterator()

  for {
    block := bci.Next()

    for _, tx := range block.Transactions {
      txID := hex.EncodeToString(tx.ID)

    Outputs:
      for outIdx, out := range tx.Vout {
        // Was the output spent?
        if spentTXOs[txID] != nil {
          for _, spentOut := range spentTXOs[txID] {
            if spentOut == outIdx {
              continue Outputs
            }
          }
        }

        if out.CanBeUnlockedWith(address) {
          unspentTXs = append(unspentTXs, *tx)
        }
      }

      if tx.IsCoinbase() == false {
        for _, in := range tx.Vin {
          if in.CanUnlockOutputWith(address) {
            inTxID := hex.EncodeToString(in.Txid)
            spentTXOs[inTxID] = append(spentTXOs[inTxID], in.Vout)
          }
        }
      }
    }

    if len(block.PrevBlockHash) == 0 {
      break
    }
  }

  return unspentTXs
}
```

ุงุฒ ุขูุฌุง ฺฉู ุชุฑุงฺฉูุด ูุง ุฏุฑ ุจููฺฉ ูุง ุฐุฎุฑู ู ุดููุฏุ ูุง ุจุงุฏ ูุฑ ุจููฺฉ ุฑุง ุฏุฑ ฺฉ ุฒูุฌุฑู ุจููฺฉ ุจุฑุฑุณ ฺฉูู. ุจุง ุฎุฑูุฌ ูุง ุดุฑูุน ู ฺฉูู:

```go
if out.CanBeUnlockedWith(address) {
	unspentTXs = append(unspentTXs, tx)
}
```

ุงฺฏุฑ ุฎุฑูุฌ ุจุง ููุงู ุขุฏุฑุณ ฺฉู ูุง ุฏุฑ ุญุงู ุฌุณุชุฌู ุฎุฑูุฌ ูุง ุชุฑุงฺฉูุด ุฎุฑุฌ ูุดุฏู ุขู ูุณุชู ููู ุดุฏู ุจุงุดุฏุ ุงู ููุงู ุฎุฑูุฌ ุงุณุช ฺฉู ู ุฎูุงูู. ุงูุง ูุจู ุงุฒ ฺฏุฑูุชู ุขูุ ุจุงุฏ ุจุฑุฑุณ ฺฉูู ฺฉู ุขุง ฺฉ ุฎุฑูุฌ ูุจูุงู ุฏุฑ ฺฉ ูุฑูุฏ ุงุฑุฌุงุน ุดุฏู ุงุณุช ุง ุฎุฑ:

```go
if spentTXOs[txID] != nil {
	for _, spentOut := range spentTXOs[txID] {
		if spentOut == outIdx {
			continue Outputs
		}
	}
}
```

ูุง ุงุฒ ููุงุฑุฏ ฺฉู ุฏุฑ ูุฑูุฏ ูุง ุจู ุขููุง ุงุดุงุฑู ุดุฏู ุจูุฏ ุตุฑููุธุฑ ู ฺฉูู (ููุงุฏุฑ ุขููุง ุจู ุฎุฑูุฌ ูุง ุฏฺฏุฑ ููุชูู ุดุฏู ุงุณุชุ ุจูุงุจุฑุงู ูู ุชูุงูู ุขููุง ุฑุง ุจุดูุงุฑู). ูพุณ ุงุฒ ุจุฑุฑุณ ุฎุฑูุฌโูุงุ ููู ูุฑูุฏโูุง ุฑุง ุฌูุนโุขูุฑ ูโฺฉูู ฺฉู ูโุชูุงููุฏ ููู ุฎุฑูุฌโูุง ุฑุง ุจุง ุขุฏุฑุณ ุงุฑุงุฆูโุดุฏู ุจุงุฒ ฺฉููุฏ (ุงู ุจุฑุง ุชุฑุงฺฉูุดโูุง coinbase ุตุฏู ููโฺฉูุฏุ ุฒุฑุง ุขููุง ููู ุฎุฑูุฌโูุง ุฑุง ุจุงุฒ ููโฺฉููุฏ):

```go
if tx.IsCoinbase() == false {
    for _, in := range tx.Vin {
        if in.CanUnlockOutputWith(address) {
            inTxID := hex.EncodeToString(in.Txid)
            spentTXOs[inTxID] = append(spentTXOs[inTxID], in.Vout)
        }
    }
}
```

ุงู ุชุงุจุน ููุฑุณุช ุงุฒ ุชุฑุงฺฉูุด ูุง ุญุงู ุฎุฑูุฌ ูุง ุฎุฑุฌ ูุดุฏู ุฑุง ุจุฑู ฺฏุฑุฏุงูุฏ. ุจุฑุง ูุญุงุณุจู ุจุงูุงูุณ ุง ููุฌูุฏ ุจู ฺฉ ุชุงุจุน ุฏฺฏุฑ ูุงุฒ ุฏุงุฑู ฺฉู ุชุฑุงฺฉูุด ูุง ุฑุง ู ฺฏุฑุฏ ู ููุท ุฎุฑูุฌ ูุง ุฑุง ุจุฑู ฺฏุฑุฏุงูุฏ:

```go
func (bc *Blockchain) FindUTXO(address string) []TXOutput {
       var UTXOs []TXOutput
       unspentTransactions := bc.FindUnspentTransactions(address)

       for _, tx := range unspentTransactions {
               for _, out := range tx.Vout {
                       if out.CanBeUnlockedWith(address) {
                               UTXOs = append(UTXOs, out)
                       }
               }
       }

       return UTXOs
}
```

ุฎูุฏุดู! ุงฺฉููู ู ุชูุงูู ุฏุณุชูุฑ _**getbalance**_ ุฑุง ูพุงุฏู ุณุงุฒ ฺฉูู:

```go
func (cli *CLI) getBalance(address string) {
	bc := NewBlockchain(address)
	defer bc.db.Close()

	balance := 0
	UTXOs := bc.FindUTXO(address)

	for _, out := range UTXOs {
		balance += out.Value
	}

	fmt.Printf("Balance of '%s': %d\n", address, balance)
}
```

ูุงูุฏู ุญุณุงุจ ูุฌููุน ููุงุฏุฑ ุชูุงู ุฎุฑูุฌ ูุง ุชุฑุงฺฉูุด ุฎุฑุฌ ูุดุฏู ุงุณุช ฺฉู ุชูุณุท ุขุฏุฑุณ ุญุณุงุจ ููู ุดุฏู ุงูุฏ.

ุจุงุฏ ุจุงูุงูุณ ุฎูุฏ ุฑุง ูพุณ ุงุฒ ุงุณุชุฎุฑุงุฌ ุจููฺฉ ูพุฏุงุด ุจุฑุฑุณ ฺฉูู:

```txt
$ blockchain_go getbalance -address Ivan
Balance of 'Ivan': 10
```

ุงู ุงููู ูพูู ูุงุณุช!

### ุงุฑุณุงู ุณฺฉู Sending Coins

ุงฺฉููู ู ุฎูุงูู ฺูุฏ ุณฺฉู ุจุฑุง ุดุฎุต ุฏฺฏุฑ ุงุฑุณุงู ฺฉูู. ุจุฑุง ุงู ฺฉุงุฑุ ุจุงุฏ ฺฉ ุชุฑุงฺฉูุด ุฌุฏุฏ ุงุฌุงุฏ ฺฉููุ ุขู ุฑุง ุฏุฑ ฺฉ ุจููฺฉ ูุฑุงุฑ ุฏูู ู ุจููฺฉ ุฑุง ุงุณุชุฎุฑุงุฌ ฺฉูู. ุชุง ุจู ุญุงู ููุท ุชุฑุงฺฉูุด coinbase (ฺฉู ููุน ุฎุงุต ุงุฒ ุชุฑุงฺฉูุด ูุง ุงุณุช) ุฑุง ูพุงุฏู ุณุงุฒ ฺฉุฑุฏู ุจูุฏูุ ุงฺฉููู ุจู ฺฉ ุชุฑุงฺฉูุด ุนููู ูุงุฒ ุฏุงุฑู:

```go
func NewUTXOTransaction(from, to string, amount int, bc *Blockchain) *Transaction {
	var inputs []TXInput
	var outputs []TXOutput

	acc, validOutputs := bc.FindSpendableOutputs(from, amount)

	if acc < amount {
		log.Panic("ERROR: Not enough funds")
	}

	// Build a list of inputs
	for txid, outs := range validOutputs {
		txID, err := hex.DecodeString(txid)

		for _, out := range outs {
			input := TXInput{txID, out, from}
			inputs = append(inputs, input)
		}
	}

	// Build a list of outputs
	outputs = append(outputs, TXOutput{amount, to})
	if acc > amount {
		outputs = append(outputs, TXOutput{acc - amount, from}) // a change
	}

	tx := Transaction{nil, inputs, outputs}
	tx.SetID()

	return &tx
}
```

ูุจู ุงุฒ ุงุฌุงุฏ ุฎุฑูุฌ ูุง ุฌุฏุฏุ ุงุจุชุฏุง ุจุงุฏ ุชูุงู ุฎุฑูุฌ ูุง ูุตุฑู ูุดุฏู ุฑุง ูพุฏุง ฺฉุฑุฏู ู ูุทูุฆู ุดูู ฺฉู ุงุฑุฒุด ฺฉุงู ุฑุง ุฐุฎุฑู ู ฺฉููุฏ. ุงู ฺฉุงุฑ ุงุณุช ฺฉู ุฑูุด _**FindSpendableOutputs**_ ุงูุฌุงู ู ุฏูุฏ. ูพุณ ุงุฒ ุขูุ ุจุฑุง ูุฑ ุฎุฑูุฌ ุงูุช ุดุฏู ฺฉ ูุฑุฌุน ูุฑูุฏ ุงุฌุงุฏ ู ุดูุฏ. ุณูพุณ ุฏู ุฎุฑูุฌ ุงุฌุงุฏ ู ฺฉูู:

ฑ- ฺฉ ฺฉู ุจุง ุขุฏุฑุณ ฺฏุฑูุฏู ููู ุดุฏู ุงุณุช. ุงู ุงูุชูุงู ูุงูุน ุณฺฉู ูุง ุจู ุขุฏุฑุณ ุฏฺฏุฑ ุงุณุช.

ฒ- ฺฉ ฺฉู ุจุง ุขุฏุฑุณ ูุฑุณุชูุฏู ููู ุดุฏู ุงุณุช. ุงู ฺฉ ุชุบุฑ ุงุณุช. ููุท ุฒูุงู ุงุฌุงุฏ ู ุดูุฏ ฺฉู ุฎุฑูุฌ ูุง ุฎุฑุฌ ูุดุฏู ุงุฑุฒุด ุจุดุชุฑ ูุณุจุช ุจู ุชุฑุงฺฉูุด ุฌุฏุฏ ุฏุงุดุชู ุจุงุดูุฏ. ุจู ุงุฏ ุฏุงุดุชู ุจุงุดุฏ: ุฎุฑูุฌ ูุง ุชูุณู ูุงูพุฐุฑ ุง **indivisible** ูุณุชูุฏ.

ูุชุฏ _**FindSpendableOutputs**_ ูุจุชู ุจุฑ ุฑูุด _**FindUnspentTransactions**_ ุงุณุช ฺฉู ูุจูุง ุชุนุฑู ฺฉุฑุฏู:

```go
func (bc *Blockchain) FindSpendableOutputs(address string, amount int) (int, map[string][]int) {
	unspentOutputs := make(map[string][]int)
	unspentTXs := bc.FindUnspentTransactions(address)
	accumulated := 0

Work:
	for _, tx := range unspentTXs {
		txID := hex.EncodeToString(tx.ID)

		for outIdx, out := range tx.Vout {
			if out.CanBeUnlockedWith(address) && accumulated < amount {
				accumulated += out.Value
				unspentOutputs[txID] = append(unspentOutputs[txID], outIdx)

				if accumulated >= amount {
					break Work
				}
			}
		}
	}

	return accumulated, unspentOutputs
}
```

ุงู ุฑูุด ุจุฑ ุฑู ุชูุงู ุชุฑุงฺฉูุด ูุง ุฎุฑุฌ ูุดุฏู ุชฺฉุฑุงุฑ ู ุดูุฏ ู ููุงุฏุฑ ุขููุง ุฑุง ุฌูุน ู ฺฉูุฏ. ููฺฏุงู ฺฉู ููุฏุงุฑ ุงูุจุงุดุชู ุจุดุชุฑ ุง ุจุฑุงุจุฑ ุจุง ููุฏุงุฑ ุงุณุช ฺฉู ูโุฎูุงูู ุงูุชูุงู ุฏููุ ูุชููู ูโุดูุฏ ู ููุฏุงุฑ ุงูุจุงุดุชู ู ุดุงุฎุตโูุง ุฎุฑูุฌ ฺฏุฑููโุจูุฏ ุดุฏู ุจุฑ ุงุณุงุณ ุดูุงุณูโูุง ุชุฑุงฺฉูุด ุฑุง ุจุฑูโฺฏุฑุฏุงูุฏ. ูุง ููโุฎูุงูู ุจุดุชุฑ ุงุฒ ฺุฒ ฺฉู ูุฑุงุฑ ุงุณุช ุฎุฑุฌ ฺฉููุ ุจฺฏุฑู.

ุงฺฉููู ู ุชูุงูู ุฑูุด _**Blockchain.MineBlock**_ ุฑุง ุงุตูุงุญ ฺฉูู:

```go
func (bc *Blockchain) MineBlock(transactions []*Transaction) {
	...
	newBlock := NewBlock(transactions, lastHash)
	...
}
```

ุฏุฑ ููุงุชุ ุงุฌุงุฒู ุฏูุฏ ุฏุณุชูุฑ ุงุฑุณุงู ุง _**send**_ ุฑุง ูพุงุฏู ุณุงุฒ ฺฉูู:

```go
func (cli *CLI) send(from, to string, amount int) {
	bc := NewBlockchain(from)
	defer bc.db.Close()

	tx := NewUTXOTransaction(from, to, amount, bc)
	bc.MineBlock([]*Transaction{tx})
	fmt.Println("Success!")
}
```

ุงุฑุณุงู ุณฺฉู ุจู ูุนูุง ุงุฌุงุฏ ฺฉ ุชุฑุงฺฉูุด ู ุงูุฒูุฏู ุขู ุจู ุจูุงฺฉ ฺู ุงุฒ ุทุฑู ุงุณุชุฎุฑุงุฌ ฺฉ ุจููฺฉ ุงุณุช. ุงูุง ุจุช ฺฉูู ููุฑุง ุงู ฺฉุงุฑ ุฑุง ุงูุฌุงู ูู ุฏูุฏ (ูุงููุฏ ูุง). ุฏุฑ ุนูุถุ ุชูุงู ุชุฑุงฺฉูุดโูุง ุฌุฏุฏ ุฑุง ุฏุฑ ูููุฑ ู ุญุงูุธู (ุง mempool) ูุฑุงุฑ ูโุฏูุฏ ู ุฒูุงู ฺฉู ูุงูุฑ ุขูุงุฏู ุงุณุชุฎุฑุงุฌ ฺฉ ุจููฺฉ ุงุณุชุ ุชูุงู ุชุฑุงฺฉูุดโูุง ุฑุง ุงุฒ mempool ูโฺฏุฑุฏ ู ฺฉ ุจููฺฉ ฺฉุงูุฏุฏ ุงุฌุงุฏ ูโฺฉูุฏ. ุชุฑุงฺฉูุดโูุง ุชููุง ุฒูุงู ุชุงุฏ ูโุดููุฏ ฺฉู ุจููฺฉ ุญุงู ุขูโูุง ุงุณุชุฎุฑุงุฌ ุดุฏู ู ุจู ุจูุงฺฉ ฺู ุงุถุงูู ุดูุฏ.

ุจุงุฏ ุจุฑุฑุณ ฺฉูู ฺฉู ุงุฑุณุงู ุณฺฉู ฺฉุงุฑ ู ฺฉูุฏ:

```txt
$ blockchain_go send -from Ivan -to Pedro -amount 6
00000001b56d60f86f72ab2a59fadb197d767b97d4873732be505e0a65cc1e37
Success!

$ blockchain_go getbalance -address Ivan
Balance of 'Ivan': 4

$ blockchain_go getbalance -address Pedro
Balance of 'Pedro': 6
```
ุจุณุงุฑ ุนุงู! ุงฺฉูููุ ุจุงุฏ ุชุฑุงฺฉูุดโูุง ุจุดุชุฑ ุงุฌุงุฏ ฺฉูู ู ุงุทููุงู ุญุงุตู ฺฉูู ฺฉู ุงุฑุณุงู ุงุฒ ฺูุฏู ุฎุฑูุฌ ุจู ุฎูุจ ุงูุฌุงู ูโุดูุฏ:

```txt
$ blockchain_go send -from Pedro -to Helen -amount 2
00000099938725eb2c7730844b3cd40209d46bce2c2af9d87c2b7611fe9d5bdf
Success!

$ blockchain_go send -from Ivan -to Helen -amount 2
000000a2edf94334b1d94f98d22d7e4c973261660397dc7340464f7959a7a9aa
Success!
```

ุงฺฉููู ุณฺฉู ูุง ููู ุฏุฑ ุฏู ุฎุฑูุฌ ููู ุดุฏู ุงูุฏ: ฺฉ ุงุฒ ูพุฏุฑู ู ุฏฺฏุฑ ุงุฒ ุงูุงู. ุจุงุฏ ุขููุง ุฑุง ุจุฑุง ุดุฎุต ุฏฺฏุฑ ุจูุฑุณุชู:

```txt
$ blockchain_go send -from Helen -to Rachel -amount 3
000000c58136cffa669e767b8f881d16e2ede3974d71df43058baaf8c069f1a0
Success!

$ blockchain_go getbalance -address Ivan
Balance of 'Ivan': 2

$ blockchain_go getbalance -address Pedro
Balance of 'Pedro': 4

$ blockchain_go getbalance -address Helen
Balance of 'Helen': 1

$ blockchain_go getbalance -address Rachel
Balance of 'Rachel': 3
```

ุนุงู ุจู ูุธุฑ ู ุฑุณุฏ! ุญุงูุง ุจุงุฏ ฺฉ ุดฺฉุณุช ุฑุง ุขุฒูุงุด ฺฉูู:

```txt
$ blockchain_go send -from Pedro -to Ivan -amount 5
panic: ERROR: Not enough funds

$ blockchain_go getbalance -address Pedro
Balance of 'Pedro': 4

$ blockchain_go getbalance -address Ivan
Balance of 'Ivan': 2
```

#### ูุชุฌู ฺฏุฑ

ุงูู! ุขุณุงู ูุจูุฏุ ุงูุง ูุง ุงฺฉููู ูุนุงููุงุช ุฏุงุฑู! ุงฺฏุฑฺูุ ุจุฑุฎ ุงุฒ ูฺฺฏ ูุง ฺฉูุฏ ฺฉ ุงุฑุฒ ุฏุฌุชุงู ูุดุงุจู ุจุช ฺฉูู ูุฌูุฏ ูุฏุงุฑุฏ:

ฑ- ุขุฏุฑุณ ูุง. ูุง ูููุฒ ุขุฏุฑุณโูุง ูุจุชู ุจุฑ ฺฉูุฏ ุฎุตูุต ูุงูุน ูุฏุงุฑู.

ฒ- ูพุงุฏุงุด. ุงุณุชุฎุฑุงุฌ ุจููฺฉ ูุทููุงู ุณูุฏุขูุฑ ูุณุช!

ณ- ูุฌููุนู UTXO. ุจู ุฏุณุช ุขูุฑุฏู ุจุงูุงูุณ ูุงุฒ ุจู ุงุณฺฉู ฺฉู ุฒูุฌุฑู ุจููฺฉ ุฏุงุฑุฏุ ฺฉู ุฏุฑ ุตูุฑุช ูุฌูุฏ ุจููฺฉ ูุง ุจุณุงุฑ ู ุฒุงุฏุ ููฺฉู ุงุณุช ุฒูุงู ุจุณุงุฑ ุฒุงุฏ ุทูู ุจฺฉุดุฏ. ููฺููุ ุงฺฏุฑ ุจุฎูุงูู ุชุฑุงฺฉูุดโูุง ุจุนุฏ ุฑุง ุชุฃุฏ ฺฉููุ ููฺฉู ุงุณุช ุฒูุงู ุฒุงุฏ ุทูู ุจฺฉุดุฏ. ูุฌููุนู UTXO ุจุฑุง ุญู ุงู ูุดฺฉูุงุช ู ุงูุฌุงู ุณุฑุน ุนููุงุช ุจุง ุชุฑุงฺฉูุด ูุง ุฏุฑ ูุธุฑ ฺฏุฑูุชู ุดุฏู ุงุณุช.

ด- ูููพูู (Mempool). ุงู ุฌุง ุงุณุช ฺฉู ุชุฑุงฺฉูุด ูุง ูุจู ุงุฒ ุจุณุชู ุจูุฏ ุฏุฑ ฺฉ ุจููฺฉ ุฐุฎุฑู ู ุดููุฏ. ุฏุฑ ุงุฌุฑุง ูุนู ูุงุ ฺฉ ุจููฺฉ ููุท ุดุงูู ฺฉ ุชุฑุงฺฉูุด ุงุณุช ู ุงู ฺฉุงููุงู ูุงฺฉุงุฑุขูุฏ ุงุณุช.

ูพุงุงู ูุณูุช ฺูุงุฑู

_**[ูุณูุช ูพูุฌู](/blog/post_44_bc5)**_

_**[ููฺฉ ููุจุน](https://jeiwan.net/posts/building-blockchain-in-go-part-4/)**_

_**ุจุงู ูุณูุช ูุง ูุณุฎู ุงุตู**_

* [Building Blockchain in Go. Part 1: Basic Prototype](https://jeiwan.net/posts/building-blockchain-in-go-part-1/)
* [Building Blockchain in Go. Part 2: Proof-of-Work](https://jeiwan.net/posts/building-blockchain-in-go-part-2/)
* [Building Blockchain in Go. Part 3: Persistence and CLI](https://jeiwan.net/posts/building-blockchain-in-go-part-3/)
* [Building Blockchain in Go. Part 4: Transactions 1](https://jeiwan.net/posts/building-blockchain-in-go-part-4/)
* [Building Blockchain in Go. Part 5: Addresses](https://jeiwan.net/posts/building-blockchain-in-go-part-5/)
* [Building Blockchain in Go. Part 6: Transactions 2](https://jeiwan.net/posts/building-blockchain-in-go-part-6/)
* [Building Blockchain in Go. Part 7: Network](https://jeiwan.net/posts/building-blockchain-in-go-part-7/)